> 创建日期：2022-10-22
>
> 修改日期：2023-03-11



#


```
此文档为接口开发模板参考
```



- 接口基准地址：`http://127.0.0.1:3000/api`
- 服务端已开启 CORS 跨域支持




| *状态码* | *含义*                | *说明*                                              |
| -------- | --------------------- | --------------------------------------------------- |
| 200      | OK                    | 请求成功                                            |
| 201      | CREATED               | 创建成功                                            |
| 204      | DELETED               | 删除成功                                            |
| 400      | BAD REQUEST           | 请求的地址不存在或者包含不支持的参数                |
| 401      | UNAUTHORIZED          | 未授权                                              |
| 403      | FORBIDDEN             | 被禁止访问                                          |
| 404      | NOT FOUND             | 请求的资源不存在                                    |
| 422      | Unprocesable entity   | [POST/PUT/PATCH] 当创建一个对象时，发生一个验证错误 |
| 500      | INTERNAL SERVER ERROR | 内部错误                                            |











# 文件目录说明

router：路由文件

router-handler：路由处理函数









# 数据库表说明

`ev_users`：用于存放用户详细信息

`content`：目录





# 1. 用户管理



## 1.1 注册用户

- 请求路径：`api/reguser`
- 请求方法：post
- 请求参数：

| 参数名   | 参数说明 | 备注           |
| -------- | -------- | -------------- |
| username | 用户名称 | 不能为空、4-10 |
| password | 用户密码 | 不能为空、6-12 |

- 响应数据

```json
{
    "status": 201,
    "msg": "创建用户成功！"
}
```





## 1.2 登录

- 请求路径：`api/login`
- 请求方法：post
- 请求参数：

| 参数名   | 参数说明 | 备注           |
| -------- | -------- | -------------- |
| username | 用户名称 | 不能为空、4-10 |
| password | 用户密码 | 不能为空、6-12 |

状态码：

| 返回参数 | 说明           |
| -------- | -------------- |
| 400      | 用户不存在     |
| 400      | 账号或密码错误 |

响应数据：

```json
{
    status: 200,
    msg: '登录成功',
    token: 'Bearer ' + tokenStr
}
```





## 1.3 获取用户列表

- 请求路径：`/userList`
- 请求方法：get

返回数据：

```json
{
    "status": 200,
    "msg": "获取用户列表成功",
    "data": [
        {
            "id": 21,
            "username": "admin",
            "password": "",
            "nickname": "管理员",
            "email": "admin@qq.com",
            "user_pic": null,
            "create_time": "",
            "login_time": "2022-09-06 16:05:22"
        },
    ]
}
```







# 2. 获取目录列表



## 2.1获取一级目录

- 请求路径：`content`
- 请求方法：get
- 请求参数：

| 参数名 | 说明         | 备注 |
| ------ | ------------ | ---- |
| token  | 由登录后生成 |      |

状态码：

| 状态码 | 说明       |
| ------ | ---------- |
| 404    | 数据库错误 |

返回参数：

```json
{
    "status": 200,
    "msg": "获取目录成功",
    "data": [
        {
            "id": 1,
            "c_name": "用户管理",
            "c_id": 1
        },
        {
            "id": 5,
            "c_name": "文章管理",
            "c_id": 1
        }
    ]
}
```



## 2.2 获取二级目录



- 请求路径：`content2`
- 请求方法：get
- 请求参数：

| 参数名 | 说明         | 备注 |
| ------ | ------------ | ---- |
| token  | 由登录后生成 |      |

状态码：

| 状态码 | 说明       |
| ------ | ---------- |
| 404    | 数据库错误 |

返回参数：

```js
{
    "status": 200,
    "msg": "获取目录成功",
    "data": [
        {
            "id": 1,
            "c_name": "新增用户",
            "c_id": 1
        },
        {
            "id": 2,
            "c_name": "删除用户",
            "c_id": 1
        }
    ]
}
```







# 3. 获取轮播图



- 请求路径：`/api/banner`
- 请求方法：get

返回参数：

```js
{
    "status": 200,
    "msg": "获取目录成功",
    "data": [
        {
            "id": 1,
            "img": "base 64",
        },
    ]
}
```





# 4. 获取文章列表



- 请求路径：`/api/contents`
- 请求方法：get

返回参数：

```json
{
    "status": 200,
    "msg": "请求数据成功",
    "data": [
        {
            "id": 1,
            "title": "这是标题",
            "cover": "base64",
            "content": "<p>这是内容</p>",
            "create_time": "2022-09-08 22:19:12",
            "edit_time": "2022-09-08 22:19:12",
            "hot": null
        },
    ]
}
```



# 5. 根据id获取文章

- 请求路径：`/api/contentInfo`

- 请求方法：get

- 请求参数

  | 参数名 | 说明             | 备注 |
  | ------ | ---------------- | ---- |
  | id     | 根据点击的li获取 |      |

  

返回参数：

```json
{
    "status": 200,
    "msg": "请求数据成功",
    "data": [
        {
            "id": 2,
            "title": "标题2",
            "cover": "封面图",
            "content": "<span>内容2</span>",
            "create_time": "2022-09-08 22:19:12",
            "edit_time": "2022-09-08 22:19:12",
            "hot": null
        }
    ]
}
```





# 6. 更新文章与标题内容



- 请求路径：`/api/editContentById`

- 请求方法：get

- 请求参数

| 参数名 | 说明             | 备注 |
| ------ | ---------------- | ---- |
| id     | 要更新的文章的id |      |
| data   | 更新的文章内容   |      |
| title  | 要更新的标题     |      |

返回参数：

```json
{
    "status": 200,
    "msg": "数据更新成功"
}
```





# 7. 新增文章

- 请求路径：`/api/newcontent`

- 请求方法：post

- 请求参数

| 参数名  | 说明     | 备注 |
| ------- | -------- | ---- |
| cover   | 封面     |      |
| content | 文章内容 |      |
| title   | 标题     |      |

返回参数：

```json
{
    "status": 200,
    "msg": "添加文章成功"
}
```



# 8. 删除文章

- 请求路径：`/api/deletecontent`

- 请求方法：delete

- 请求参数

| 参数名 | 说明           | 备注 |
| ------ | -------------- | ---- |
| token  | 登录生成       |      |
| id     | 要删除的文章id |      |

返回参数：

```json
{
    "status": 200,
    "msg": "删除成功"
}
```



# 9. 分页文章列表

- 请求路径：`/pagecontent`

- 请求方法：get

- 请求参数

| 参数名 | 说明       | 备注 |
| ------ | ---------- | ---- |
| token  | 登录生成   |      |
| num    | 每页数量   |      |
| page   | 获取第几页 |      |

返回参数：

```json
{
    "status": 200,
    "msg": "获取文章成功",
    "data": [
        {
            "id": 2,
            "title": "标题2",
            "cover": "封面图",
            "content": "<span>内容2</span>",
            "create_time": "2022-09-08 22:19:12",
            "edit_time": "2022-09-08 22:19:12",
            "hot": null
        }
    ]
}
```





# 10. 搜索文章

- 请求路径：`/api/search`

- 请求方法：get

- 请求参数

| 参数名 | 说明           | 备注 |
| ------ | -------------- | ---- |
| title  | 搜索标题关键字 |      |

返回参数：

```json
{
    "status": 200,
    "msg": "获取列表成功",
    "data": [
        {
            "id": 2,
            "title": "标题2",
            "cover": "",
            "content": "<p>内容2</p>",
            "create_time": "2022-09-08 22:19:12",
            "edit_time": "2022-09-11 22:32:49",
            "hot": null
        }
    ]
}
```











